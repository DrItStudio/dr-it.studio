<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Deletion Request - Forest Calculator</title>
    <script>
        // Error handling - check if there was a server error
        window.onerror = function(message, source, lineno, colno, error) {
            if (message && message.includes('500') || (error && error.message && error.message.includes('500'))) {
                window.location.href = 'error.html';
                return true; // Prevents the default error handler
            }
            return false;
        };
        
        // Handle 500 errors during page load
        if (document.readyState === 'loading') {
            window.addEventListener('error', function(e) {
                if (e.error && (e.error.message.includes('500') || e.message.includes('500'))) {
                    window.location.href = 'error.html';
                }
            });
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 60px 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 40px;
        }

        .logo-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo-img {
            height: 60px;
            width: auto;
        }

        h1 {
            color: #27ae60;
            margin-bottom: 20px;
            text-align: center;
            font-size: 2rem;
        }

        .form-description {
            margin-bottom: 30px;
            color: #555;
            text-align: center;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #444;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1rem;
            transition: border 0.3s;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #2196F3;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .required-field::after {
            content: "*";
            color: #e41f1f;
            margin-left: 4px;
        }

        .error-text {
            color: #e41f1f;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        .btn-submit {
            background: linear-gradient(90deg, #2196F3 0%, #0D47A1 100%);
            color: white;
            transition: transform 0.3s, box-shadow 0.3s;
            display: inline-block;
            padding: 12px 24px;
            font-size: 1rem;
            border-radius: 30px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(44,62,80,0.1);
            width: 100%;
        }

        .btn-submit:hover {
            background: linear-gradient(90deg, #1E88E5 0%, #0D47A1 100%);
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.25);
            transform: translateY(-3px);
        }

        .btn-back {
            display: block;
            text-align: center;
            margin-top: 20px;
            color: #ffffff;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .btn-back:hover {
            text-decoration: underline;
        }

        .success-message {
            display: none;
            background-color: #e8f5e9;
            color: #27ae60;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }
        
        .success-message h3 {
            color: #2e7d32;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .success-message p {
            color: #27ae60;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .language-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-end;
        }
        
        @media (max-width: 768px) {
            .language-selector {
                position: relative;
                top: 0;
                right: 0;
                justify-content: center;
                margin-bottom: 20px;
            }
        }
    </style>
    <script src="js/language-manager.js" defer></script>
    <!-- Удаляем EmailJS, так как будем использовать FormSubmit -->
</head>
<body>
    <div class="container">
        <div class="logo-container">
            <img src="logo_light.png" alt="Forest Calculator Logo" class="logo-img">
        </div>
        
        <h1 id="form-title" data-en="Personal Data Deletion Request" data-ru="Запрос на удаление личных данных" data-uk="Запит на видалення особистих даних" data-es="Solicitud de eliminación de datos personales" data-fr="Demande de suppression de données personnelles" data-de="Antrag auf Löschung personenbezogener Daten" data-zh="个人数据删除请求">Personal Data Deletion Request</h1>
        
        <p class="form-description" id="form-description" data-en="Please fill out the form below to request deletion of your personal data from our systems. We will review your request in accordance with applicable data protection laws." data-ru="Заполните форму ниже, чтобы запросить удаление ваших личных данных из наших систем. Мы рассмотрим ваш запрос в соответствии с действующим законодательством о защите данных." data-uk="Заповніть форму нижче, щоб запитати видалення ваших особистих даних з наших систем. Ми розглянемо ваш запит відповідно до чинного законодавства про захист даних." data-es="Complete el siguiente formulario para solicitar la eliminación de sus datos personales de nuestros sistemas. Revisaremos su solicitud de acuerdo con las leyes de protección de datos aplicables." data-fr="Veuillez remplir le formulaire ci-dessous pour demander la suppression de vos données personnelles de nos systèmes. Nous examinerons votre demande conformément aux lois applicables sur la protection des données." data-de="Bitte füllen Sie das untenstehende Formular aus, um die Löschung Ihrer persönlichen Daten aus unseren Systemen zu beantragen. Wir werden Ihren Antrag gemäß den geltenden Datenschutzgesetzen prüfen." data-zh="请填写下面的表格，申请从我们的系统中删除您的个人数据。我们将根据适用的数据保护法律审核您的请求。">Please fill out the form below to request deletion of your personal data from our systems. We will review your request in accordance with applicable data protection laws.</p>
        
        <div class="data-collection-notice" style="background-color: #f8f9fa; padding: 15px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #6c757d;">
            <p style="margin: 0; font-weight: 500;" id="notice-header" data-en="Data Collection Notice" data-ru="Уведомление о сборе данных" data-uk="Повідомлення про збір даних" data-es="Aviso de recopilación de datos" data-fr="Avis de collecte de données" data-de="Hinweis zur Datenerhebung" data-zh="数据收集通知">Data Collection Notice</p>
            <p style="margin-top: 8px; font-size: 0.95rem;" id="notice-current" data-en="Currently, our application does not collect personal user data. However, if future updates include data collection, you can request deletion of your data using this form." data-ru="В настоящее время наше приложение не собирает личные данные пользователей. Однако, если будущие обновления будут включать сбор данных, вы можете запросить удаление ваших данных, используя эту форму." data-uk="На даний момент наш додаток не збирає особисті дані користувачів. Проте, якщо майбутні оновлення включатимуть збір даних, ви можете запросити видалення своїх даних за допомогою цієї форми." data-es="Actualmente, nuestra aplicación no recopila datos personales de usuarios. Sin embargo, si las actualizaciones futuras incluyen la recopilación de datos, puede solicitar la eliminación de sus datos utilizando este formulario." data-fr="Actuellement, notre application ne collecte pas de données personnelles des utilisateurs. Cependant, si les mises à jour futures incluent la collecte de données, vous pouvez demander la suppression de vos données en utilisant ce formulaire." data-de="Derzeit sammelt unsere Anwendung keine persönlichen Benutzerdaten. Wenn zukünftige Updates jedoch Datenerfassung beinhalten, können Sie die Löschung Ihrer Daten über dieses Formular beantragen." data-zh="目前，我们的应用程序不收集个人用户数据。但是，如果未来的更新包括数据收集，您可以使用此表格申请删除您的数据。">Currently, our application does not collect personal user data. However, if future updates include data collection, you can request deletion of your data using this form.</p>
            <p style="margin-top: 8px; font-size: 0.95rem;" id="notice-third-party" data-en="Please note that third-party services used in our applications may collect data according to their own privacy policies:" data-ru="Обратите внимание, что сторонние сервисы, используемые в наших приложениях, могут собирать данные в соответствии с их собственными политиками конфиденциальности:" data-uk="Зверніть увагу, що сторонні сервіси, які використовуються в наших додатках, можуть збирати дані відповідно до їх власних політик конфіденційності:" data-es="Tenga en cuenta que los servicios de terceros utilizados en nuestras aplicaciones pueden recopilar datos de acuerdo con sus propias políticas de privacidad:" data-fr="Veuillez noter que les services tiers utilisés dans nos applications peuvent collecter des données conformément à leurs propres politiques de confidentialité:" data-de="Bitte beachten Sie, dass von uns verwendete Drittanbieterdienste gemäß ihren eigenen Datenschutzrichtlinien Daten sammeln können:" data-zh="请注意，我们应用程序中使用的第三方服务可能会根据其自己的隐私政策收集数据：">Please note that third-party services used in our applications may collect data according to their own privacy policies:</p>
            <ul style="margin-top: 8px; font-size: 0.95rem; padding-left: 20px;">
                <li id="huawei-link" data-en="Huawei Ads Privacy Policy: <a href='https://consumer.huawei.com/en/privacy/privacy-policy/' target='_blank'>link</a>" data-ru="Политика конфиденциальности Huawei Ads: <a href='https://consumer.huawei.com/ru/privacy/privacy-policy/' target='_blank'>ссылка</a>" data-uk="Політика конфіденційності Huawei Ads: <a href='https://consumer.huawei.com/ua/privacy/privacy-policy/' target='_blank'>посилання</a>" data-es="Política de privacidad de Huawei Ads: <a href='https://consumer.huawei.com/es/privacy/privacy-policy/' target='_blank'>enlace</a>" data-fr="Politique de confidentialité de Huawei Ads: <a href='https://consumer.huawei.com/fr/privacy/privacy-policy/' target='_blank'>lien</a>" data-de="Datenschutzrichtlinie für Huawei Ads: <a href='https://consumer.huawei.com/de/privacy/privacy-policy/' target='_blank'>Link</a>" data-zh="华为广告隐私政策：<a href='https://consumer.huawei.com/cn/privacy/privacy-policy/' target='_blank'>链接</a>">Huawei Ads Privacy Policy: <a href='https://consumer.huawei.com/en/privacy/privacy-policy/' target='_blank'>link</a></li>
                <li id="admob-link" data-en="Google AdMob Privacy Policy: <a href='https://policies.google.com/privacy' target='_blank'>link</a>" data-ru="Политика конфиденциальности Google AdMob: <a href='https://policies.google.com/privacy?hl=ru' target='_blank'>ссылка</a>" data-uk="Політика конфіденційності Google AdMob: <a href='https://policies.google.com/privacy?hl=uk' target='_blank'>посилання</a>" data-es="Política de privacidad de Google AdMob: <a href='https://policies.google.com/privacy?hl=es' target='_blank'>enlace</a>" data-fr="Politique de confidentialité de Google AdMob: <a href='https://policies.google.com/privacy?hl=fr' target='_blank'>lien</a>" data-de="Datenschutzrichtlinie für Google AdMob: <a href='https://policies.google.com/privacy?hl=de' target='_blank'>Link</a>" data-zh="Google AdMob隐私政策：<a href='https://policies.google.com/privacy?hl=zh-CN' target='_blank'>链接</a>">Google AdMob Privacy Policy: <a href='https://policies.google.com/privacy' target='_blank'>link</a></li>
                <li id="unity-link" data-en="Unity Ads Privacy Policy: <a href='https://unity.com/legal/privacy-policy' target='_blank'>link</a>" data-ru="Политика конфиденциальности Unity Ads: <a href='https://unity.com/legal/privacy-policy' target='_blank'>ссылка</a>" data-uk="Політика конфіденційності Unity Ads: <a href='https://unity.com/legal/privacy-policy' target='_blank'>посилання</a>" data-es="Política de privacidad de Unity Ads: <a href='https://unity.com/legal/privacy-policy' target='_blank'>enlace</a>" data-fr="Politique de confidentialité de Unity Ads: <a href='https://unity.com/legal/privacy-policy' target='_blank'>lien</a>" data-de="Datenschutzrichtlinie für Unity Ads: <a href='https://unity.com/legal/privacy-policy' target='_blank'>Link</a>" data-zh="Unity Ads隐私政策：<a href='https://unity.com/legal/privacy-policy' target='_blank'>链接</a>">Unity Ads Privacy Policy: <a href='https://unity.com/legal/privacy-policy' target='_blank'>link</a></li>
                <li id="applovin-link" data-en="AppLovin Privacy Policy: <a href='https://www.applovin.com/privacy/' target='_blank'>link</a>" data-ru="Политика конфиденциальности AppLovin: <a href='https://www.applovin.com/privacy/' target='_blank'>ссылка</a>" data-uk="Політика конфіденційності AppLovin: <a href='https://www.applovin.com/privacy/' target='_blank'>посилання</a>" data-es="Política de privacidad de AppLovin: <a href='https://www.applovin.com/privacy/' target='_blank'>enlace</a>" data-fr="Politique de confidentialité d'AppLovin: <a href='https://www.applovin.com/privacy/' target='_blank'>lien</a>" data-de="Datenschutzrichtlinie für AppLovin: <a href='https://www.applovin.com/privacy/' target='_blank'>Link</a>" data-zh="AppLovin隐私政策：<a href='https://www.applovin.com/privacy/' target='_blank'>链接</a>">AppLovin Privacy Policy: <a href='https://www.applovin.com/privacy/' target='_blank'>link</a></li>
            </ul>
        </div>
        
        <div class="email-notice" id="email-notice" style="background-color: #e3f2fd; padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #2196F3;">
            <p style="margin: 0; font-weight: 500; color: #0D47A1;" id="notice-title" data-en="How this works" data-ru="Как это работает" data-uk="Як це працює" data-es="Cómo funciona" data-fr="Comment ça marche" data-de="Wie es funktioniert" data-zh="工作原理">How this works</p>
            <p style="margin-top: 8px; font-size: 0.95rem;" id="notice-text" data-en="When you submit this form, your request will be securely sent to our support team. You will receive a confirmation email and be redirected to a confirmation page." data-ru="Когда вы отправите эту форму, ваш запрос будет безопасно отправлен нашей команде поддержки. Вы получите электронное письмо с подтверждением и будете перенаправлены на страницу подтверждения." data-uk="Коли ви надішлете цю форму, ваш запит буде безпечно відправлений нашій команді підтримки. Ви отримаєте електронний лист з підтвердженням та будете перенаправлені на сторінку підтвердження." data-es="Cuando envíe este formulario, su solicitud se enviará de forma segura a nuestro equipo de soporte. Recibirá un correo electrónico de confirmación y será redirigido a una página de confirmación." data-fr="Lorsque vous soumettez ce formulaire, votre demande sera envoyée en toute sécurité à notre équipe d'assistance. Vous recevrez un e-mail de confirmation et serez redirigé vers une page de confirmation." data-de="Wenn Sie dieses Formular absenden, wird Ihre Anfrage sicher an unser Support-Team gesendet. Sie erhalten eine Bestätigungs-E-Mail und werden zu einer Bestätigungsseite weitergeleitet." data-zh="提交此表单后，您的请求将安全地发送给我们的支持团队。您将收到确认电子邮件并被重定向到确认页面。">When you submit this form, your request will be securely sent to our support team. You will receive a confirmation email and be redirected to a confirmation page.</p>
        </div>
        
        <!-- Using FormSubmit for direct email submission -->
        <form id="deletion-form" action="https://formsubmit.co/support@dr-it.studio" method="POST" onsubmit="return handleFormSubmission(event)">
            <!-- Hidden FormSubmit fields -->
            <input type="hidden" name="_subject" value="Data Deletion Request">
            <input type="hidden" name="_next" value="deletion-success.html">
            <input type="hidden" name="_template" value="table">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_autoresponse" value="Thank you for your data deletion request. We have received it and will process it within 30 days.">
            <input type="hidden" name="_format" value="plain">
            <input type="hidden" name="_honey" style="display:none">
            <input type="hidden" name="message_details" id="message-description" value="">
            
            <div class="form-group">
                <label for="user-name" class="required-field" id="name-label" data-en="Name" data-ru="Имя" data-uk="Ім'я" data-es="Nombre" data-fr="Nom" data-de="Name" data-zh="姓名">Name</label>
                <input type="text" id="user-name" name="name" required>
                <p class="error-text" id="name-error" data-en="Please enter your name" data-ru="Пожалуйста, введите ваше имя" data-uk="Будь ласка, введіть ваше ім'я" data-es="Por favor ingrese su nombre" data-fr="Veuillez entrer votre nom" data-de="Bitte geben Sie Ihren Namen ein" data-zh="请输入您的姓名">Please enter your name</p>
            </div>
            
            <div class="form-group">
                <label for="user-email" class="required-field" id="email-label" data-en="Email" data-ru="Электронная почта" data-uk="Електронна пошта" data-es="Correo electrónico" data-fr="Email" data-de="E-Mail" data-zh="电子邮件">Email</label>
                <input type="email" id="user-email" name="email" required>
                <p class="error-text" id="email-error" data-en="Please enter a valid email address" data-ru="Пожалуйста, введите действующий адрес электронной почты" data-uk="Будь ласка, введіть дійсну адресу електронної пошти" data-es="Por favor ingrese un correo electrónico válido" data-fr="Veuillez entrer une adresse e-mail valide" data-de="Bitte geben Sie eine gültige E-Mail-Adresse ein" data-zh="请输入有效的电子邮件地址">Please enter a valid email address</p>
            </div>
            
            <div class="form-group">
                <label for="app-selection" class="required-field" id="app-label" data-en="Application" data-ru="Приложение" data-uk="Додаток" data-es="Aplicación" data-fr="Application" data-de="Anwendung" data-zh="应用程序">Application</label>
                <select id="app-selection" name="application" required>
                    <option value="" id="select-app" data-en="Select an application" data-ru="Выберите приложение" data-uk="Виберіть додаток" data-es="Seleccionar una aplicación" data-fr="Sélectionner une application" data-de="Wählen Sie eine Anwendung" data-zh="选择应用程序">Select an application</option>
                    <option value="Forest Calculator" id="forest-calc" data-en="Forest Calculator" data-ru="Forest Calculator" data-uk="Forest Calculator" data-es="Forest Calculator" data-fr="Forest Calculator" data-de="Forest Calculator" data-zh="Forest Calculator">Forest Calculator</option>
                    <option value="Forest Calculator Pro" id="forest-calc-pro" data-en="Forest Calculator Pro" data-ru="Forest Calculator Pro" data-uk="Forest Calculator Pro" data-es="Forest Calculator Pro" data-fr="Forest Calculator Pro" data-de="Forest Calculator Pro" data-zh="Forest Calculator Pro">Forest Calculator Pro</option>
                </select>
                <p class="error-text" id="app-error" data-en="Please select an application" data-ru="Пожалуйста, выберите приложение" data-uk="Будь ласка, виберіть додаток" data-es="Por favor seleccione una aplicación" data-fr="Veuillez sélectionner une application" data-de="Bitte wählen Sie eine Anwendung" data-zh="请选择一个应用程序">Please select an application</p>
            </div>
            
            <div class="form-group">
                <label for="user-message" id="message-label" data-en="Message (optional)" data-ru="Сообщение (необязательно)" data-uk="Повідомлення (необов'язково)" data-es="Mensaje (opcional)" data-fr="Message (facultatif)" data-de="Nachricht (optional)" data-zh="信息（可选）">Message (optional)</label>
                <textarea id="user-message" name="message" data-en="Additional information about your request..." data-ru="Дополнительная информация о вашем запросе..." data-uk="Додаткова інформація про ваш запит..." data-es="Información adicional sobre su solicitud..." data-fr="Informations supplémentaires concernant votre demande..." data-de="Zusätzliche Informationen zu Ihrer Anfrage..." data-zh="有关您请求的其他信息..." placeholder="Additional information about your request..."></textarea>
            </div>
            
            <!-- Добавим скрытое поле для указания типа запроса -->
            <input type="hidden" name="request_type" value="Data Deletion Request - GDPR">
            
            <button type="submit" class="btn-submit" id="submit-button" data-en="Submit Request" data-ru="Отправить запрос" data-uk="Надіслати запит" data-es="Enviar solicitud" data-fr="Envoyer la demande" data-de="Anfrage senden" data-zh="提交请求">Submit Request</button>
        </form>
        
        <div class="success-message" id="success-message">
            <h3 id="success-title" data-en="Email Client Opened" data-ru="Почтовый клиент открыт" data-uk="Поштовий клієнт відкрито" data-es="Cliente de correo abierto" data-fr="Client de messagerie ouvert" data-de="E-Mail-Client geöffnet" data-zh="电子邮件客户端已打开">Email Client Opened</h3>
            <p data-en="Your email client has been opened with your data deletion request. Please send the email to complete your request. We will process it as soon as possible and contact you via the provided email address." data-ru="Ваш почтовый клиент был открыт с запросом на удаление данных. Пожалуйста, отправьте письмо для завершения запроса. Мы обработаем его как можно скорее и свяжемся с вами по указанному адресу электронной почты." data-uk="Ваш поштовий клієнт був відкритий із запитом на видалення даних. Будь ласка, відправте лист для завершення запиту. Ми обробимо його якомога швидше і зв'яжемося з вами за вказаною адресою електронної пошти." data-es="Su cliente de correo electrónico se ha abierto con su solicitud de eliminación de datos. Por favor, envíe el correo electrónico para completar su solicitud. Procesaremos su solicitud lo antes posible y nos pondremos en contacto con usted a través de la dirección de correo electrónico proporcionada." data-fr="Votre client de messagerie a été ouvert avec votre demande de suppression de données. Veuillez envoyer l'e-mail pour compléter votre demande. Nous la traiterons dès que possible et vous contacterons via l'adresse e-mail fournie." data-de="Ihr E-Mail-Client wurde mit Ihrer Datenlöschungsanfrage geöffnet. Bitte senden Sie die E-Mail, um Ihre Anfrage abzuschließen. Wir werden sie so schnell wie möglich bearbeiten und Sie über die angegebene E-Mail-Adresse kontaktieren." data-zh="您的电子邮件客户端已打开，其中包含您的数据删除请求。请发送电子邮件以完成您的请求。我们将尽快处理您的请求，并通过提供的电子邮件地址与您联系。">Your email client has been opened with your data deletion request. Please send the email to complete your request. We will process it as soon as possible and contact you via the provided email address.</p>
            <p style="margin-top: 10px; font-weight: bold;" id="manual-note" data-en="If your email client didn't open, please manually send an email to support@dr-it.studio with your request details." data-ru="Если ваш почтовый клиент не открылся, пожалуйста, отправьте электронное письмо вручную на адрес support@dr-it.studio с деталями вашего запроса." data-uk="Якщо ваш поштовий клієнт не відкрився, будь ласка, надішліть електронний лист вручну на адресу support@dr-it.studio з деталями вашого запиту." data-es="Si su cliente de correo electrónico no se abrió, envíe un correo electrónico manualmente a support@dr-it.studio con los detalles de su solicitud." data-fr="Si votre client de messagerie ne s'est pas ouvert, veuillez envoyer manuellement un email à support@dr-it.studio avec les détails de votre demande." data-de="Wenn sich Ihr E-Mail-Client nicht geöffnet hat, senden Sie bitte manuell eine E-Mail an support@dr-it.studio mit den Details Ihrer Anfrage." data-zh="如果您的电子邮件客户端未打开，请手动发送电子邮件至support@dr-it.studio，并附上您的请求详情。">If your email client didn't open, please manually send an email to support@dr-it.studio with your request details.</p>
            <p style="margin-top: 10px;" id="redirect-note" data-en="You will be redirected to the success page in a moment..." data-ru="Вы будете перенаправлены на страницу успешной отправки через мгновение..." data-uk="Ви будете перенаправлені на сторінку успішного відправлення через мить..." data-es="Será redirigido a la página de éxito en un momento..." data-fr="Vous serez redirigé vers la page de succès dans un instant..." data-de="Sie werden in Kürze zur Erfolgsseite weitergeleitet..." data-zh="您将在片刻后被重定向到成功页面...">You will be redirected to the success page in a moment...</p>
        </div>
        
        <a href="forest-calculator.html" class="btn-back" id="back-button" data-en="Back to Forest Calculator" data-ru="Вернуться к Forest Calculator" data-uk="Повернутися до Forest Calculator" data-es="Volver a Forest Calculator" data-fr="Retour à Forest Calculator" data-de="Zurück zu Forest Calculator" data-zh="返回 Forest Calculator">Back to Forest Calculator</a>
    </div>

    <script>
        // Initialization function for language manager
        document.addEventListener('DOMContentLoaded', function() {
            // Create language selector if not exists
            if (!document.querySelector('.language-selector')) {
                const languageSelector = document.createElement('div');
                languageSelector.className = 'language-selector';
                languageSelector.style.position = 'absolute';
                languageSelector.style.top = '20px';
                languageSelector.style.right = '20px';
                languageSelector.style.zIndex = '100';
                
                const languages = [
                    { code: 'en', name: 'English' },
                    { code: 'ru', name: 'Русский' },
                    { code: 'uk', name: 'Українська' },
                    { code: 'es', name: 'Español' },
                    { code: 'fr', name: 'Français' },
                    { code: 'de', name: 'Deutsch' },
                    { code: 'zh', name: '中文' }
                ];
                
                languages.forEach(lang => {
                    const langButton = document.createElement('button');
                    langButton.textContent = lang.name;
                    langButton.className = 'lang-btn';
                    langButton.dataset.lang = lang.code;
                    langButton.style.margin = '0 5px';
                    langButton.style.padding = '5px 10px';
                    langButton.style.border = '1px solid #ccc';
                    langButton.style.borderRadius = '3px';
                    langButton.style.background = '#fff';
                    langButton.style.cursor = 'pointer';
                    
                    langButton.addEventListener('click', function() {
                        localStorage.setItem('selectedLanguage', lang.code);
                        if (typeof LanguageManager !== 'undefined') {
                            LanguageManager.switchLanguage(lang.code);
                        }
                    });
                    
                    languageSelector.appendChild(langButton);
                });
                
                document.body.appendChild(languageSelector);
            }
            
            if (typeof LanguageManager !== 'undefined') {
                // Initialize language manager if it exists
                LanguageManager.initLanguage();
            }
            
            // No need to check for backup mode anymore as we're using mailto directly
        });

        // Функция для отправки через mailto
        // Handle the 500 error message
        function handle500Error() {
            // Check if there's a 500 error message in the page content
            const bodyText = document.body.innerText || '';
            if (bodyText.includes('500') && 
                bodyText.includes('server issues') && 
                bodyText.includes('Looks like we are having some server issues')) {
                
                window.location.href = 'error.html';
                return true;
            }
            return false;
        }
        
        // Check for error on load and configure the form properly
        window.addEventListener('DOMContentLoaded', function() {
            if (handle500Error()) {
                console.log('Redirected due to 500 error detection');
                return;
            }
            
            // Ensure form is correctly configured
            const form = document.getElementById('deletion-form');
            if (form) {
                // Make sure we have the right action
                if (!form.action || form.action.trim() === '') {
                    form.action = 'https://formsubmit.co/support@dr-it.studio';
                }
                
                // Double-check the next URL
                const nextInput = form.querySelector('input[name="_next"]');
                if (nextInput) {
                    nextInput.value = window.location.origin + '/deletion-success.html';
                    // Fallback if origin isn't available
                    if (nextInput.value.includes('null')) {
                        nextInput.value = 'deletion-success.html';
                    }
                }
            }
        });
        
        function handleFormSubmission(event) {
            // First check for 500 error
            if (handle500Error()) {
                event.preventDefault();
                return false;
            }
            
            let isValid = true;
            const userName = document.getElementById('user-name');
            const userEmail = document.getElementById('user-email');
            const appSelection = document.getElementById('app-selection');
            const userMessage = document.getElementById('user-message');
            
            // Validate name
            if (userName.value.trim() === '') {
                document.getElementById('name-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('name-error').style.display = 'none';
            }
            
            // Validate email
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(userEmail.value)) {
                document.getElementById('email-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('email-error').style.display = 'none';
            }
            
            // Validate app selection
            if (appSelection.value === '') {
                document.getElementById('app-error').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('app-error').style.display = 'none';
            }
            
            if (!isValid) {
                event.preventDefault();
                return false;
            }
            
            // If form is valid, prepare for FormSubmit submission
            // Show loading indicator
            document.getElementById('submit-button').disabled = true;
            document.getElementById('submit-button').innerHTML = '<span id="loading-text" data-en="Submitting..." data-ru="Отправка..." data-uk="Надсилання..." data-es="Enviando..." data-fr="Envoi en cours..." data-de="Senden..." data-zh="提交中...">Submitting...</span>';
            
            // Add more detailed information for the FormSubmit email
            document.getElementById('message-description').value = 
                `Application: ${appSelection.value}\n` +
                `Message: ${userMessage.value || "No additional message"}\n\n` +
                `This is a request for personal data deletion in accordance with data protection regulations.`;
            
            // Save submission state to localStorage
            localStorage.setItem('formSubmitted', 'true');
            localStorage.setItem('submitterName', userName.value);
            localStorage.setItem('submitterApp', appSelection.value);
            
            // Create a success notification that will appear after submission
            const successNotification = document.createElement('div');
            successNotification.id = 'submission-notification';
            successNotification.style.position = 'fixed';
            successNotification.style.top = '20px';
            successNotification.style.left = '50%';
            successNotification.style.transform = 'translateX(-50%)';
            successNotification.style.backgroundColor = '#4CAF50';
            successNotification.style.color = 'white';
            successNotification.style.padding = '15px 20px';
            successNotification.style.borderRadius = '5px';
            successNotification.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';
            successNotification.style.zIndex = '1000';
            successNotification.innerHTML = 'Form submitted successfully! Redirecting to confirmation page...';
            document.body.appendChild(successNotification);
            
            // Set timeout for redirection with notification
            setTimeout(function() {
                window.location.href = "deletion-success.html";
            }, 2000);
            
            // Allow form to submit to FormSubmit
            return true;
        }
    </script>
</body>
</html>
